---
title: "St\u00E1tn\u00ED zam\u011Bstnanci a \u00FA\u0159edn\u00EDci: kde pracuj\u00ED a za kolik?"
author: "Daniel Bartu\u0161ek, Petr Bouchal, Petr Jansk\u00FD"
subtitle: Pracovní verze studie IDEA
date: listopad 2021 (pracovní verze)
output:
  html_document:
    css: docs/custom.css
    self_contained: no
    toc: yes
    toc_float: yes
    toc_depth: 3
    pandoc_args: !expr rmarkdown::pandoc_lua_filter_args(rmarkdown::pkg_file_lua('pandoc-quotes.lua', 'ptrr'))
    theme:
      version: 5
  pdf_document: default
  bookdown::word_document2: 
    number_sections: no
    pandoc_args: !expr rmarkdown::pandoc_lua_filter_args(rmarkdown::pkg_file_lua('pandoc-quotes.lua', 'ptrr'))
    reference_docx: idea-template.docx

always_allow_html: yes
knit: (function(input_file, encoding) {
  out_dir <- 'docs';
  rmarkdown::render(input_file,
 encoding=encoding,
 output_file=file.path(dirname(input_file), out_dir, 'index.html'))})
bibliography: [references.json, packages.bib]
csl: chicago-author-date.csl
link-citations: yes
nocite: '@*'
lang: cs
---

```{r setup, include=FALSE}
library(dplyr)
library(plotly)
library(ggplot2)
library(data.table)
library(stringr)
library(tidyr)
library(forcats)
library(ggokabeito)
library(RColorBrewer)
library(gplots)
library(bslib)
library(readr)
library(readxl)
library(tibble)
library(tidyr)
library(here)
library(stringr)
library(janitor)
library(czso)

options("scipen"=100, "digits"=8)
dt <- readRDS("./data-interim/sections.rds")
sum <- readRDS("./data-interim/summary.rds")
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
knitr::write_bib(c("base", "ggplot2", "dplyr", "readr", "gplots", "stringr", "plotly", 
                   "czso", "janitor", "data.table", "forcats", "tidyr", "statnipokladna"),
                 file = 'packages.bib')
```

<script src="https://hypothes.is/embed.js" async></script>

```{r echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
kat_order_ss <- c("Ministerstva", "Ostatní ústřední", "Neústřední st. správa")
kat_order_all <- c("Ministerstva", "Ostatní ústřední", "Neústřední st. správa", 
                   "Ostatní vč. armády", "Sbory", "Příspěvkové organizace")

kat_order_all <- c("Ministerstva", "Ostatní ústřední", "Neústřední st. správa", 
                   "Ostatní vč. armády", "Sbory", "Příspěvkové organizace")
color_map <- c("Ministerstva"=col2hex("gold1"), 
               "Neústřední st. správa"=col2hex("steelblue1"),
               "Ostatní ústřední"=col2hex("maroon"),
               "Ostatní vč. armády"=col2hex("olivedrab4"), 
               "Příspěvkové organizace"=col2hex("thistle3"),
               "Sbory"=col2hex("royalblue4"), 
               "Ústřední orgány" = col2hex("indianred"), 
               "Státní správa" = col2hex("palegreen2"), 
               "Organizační složky státu" = col2hex("lightcyan3"))

kaps <- unique(dt$kap_name)
color_map_kap <- ifelse(substr(kaps,1,1) == "M","gold1","royalblue4")
names(color_map_kap) <- kaps

```



```{r tree_prep, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}

aux <- dt %>%
  filter(!is.na(kategorie_2014_cz), typ_rozpoctu == "SKUT", 
         kategorie_2014 != "Statni sprava", rok == 2020) %>%
  group_by(kategorie_2014_cz) %>%
  summarise(cost = sum(prostredky_na_platy),
            count = sum(pocet_zamestnancu)) %>%
  rename("labels" = kategorie_2014_cz) %>%
  mutate(parents = c("\u00DAst\u0159edn\u00ED org\u00E1ny", 
                     "St\u00E1tn\u00ED spr\u00E1va", 
                     "\u00DAst\u0159edn\u00ED org\u00E1ny", 
                     "Organiza\u010Dn\u00ED slo\u017Eky st\u00E1tu", "", 
                     "St\u00E1tn\u00ED spr\u00E1va"))

#UO = Ministrerstva + Ostatni ustrednu
#SS = UO+Sbory+Neustredni SS

to_append <- data.frame(
  labels = c("\u00DAst\u0159edn\u00ED org\u00E1ny", "St\u00E1tn\u00ED spr\u00E1va", 
             "Organiza\u010Dn\u00ED slo\u017Eky st\u00E1tu"), 
  parents = c("St\u00E1tn\u00ED spr\u00E1va", "Organiza\u010Dn\u00ED slo\u017Eky st\u00E1tu", ""),
  cost = c(
    aux$cost[aux$labels == "Ministerstva"] +
      aux$cost[aux$labels == "Ostatn\u00ED \u00FAst\u0159edn\u00ED"],
    aux$cost[aux$labels == "Ministerstva"] +
      aux$cost[aux$labels == "Ostatn\u00ED \u00FAst\u0159edn\u00ED"] +
      aux$cost[aux$labels == "Sbory"] +
      aux$cost[aux$labels == "Ne\u00FAst\u0159edn\u00ED st. spr\u00E1va"],
    aux$cost[aux$labels == "Ministerstva"] +
      aux$cost[aux$labels == "Ostatn\u00ED \u00FAst\u0159edn\u00ED"] +
      aux$cost[aux$labels == "Sbory"] +
      aux$cost[aux$labels == "Ne\u00FAst\u0159edn\u00ED st. spr\u00E1va"] +
      aux$cost[aux$labels == "Ostatn\u00ED v\u010D. arm\u00E1dy"]
  ),
  count = c(
    aux$count[aux$labels == "Ministerstva"] +
      aux$count[aux$labels == "Ostatn\u00ED \u00FAst\u0159edn\u00ED"],
    aux$count[aux$labels == "Ministerstva"] +
      aux$count[aux$labels == "Ostatn\u00ED \u00FAst\u0159edn\u00ED"] +
      aux$count[aux$labels == "Sbory"] +
      aux$count[aux$labels == "Ne\u00FAst\u0159edn\u00ED st. spr\u00E1va"],
    aux$count[aux$labels == "Ministerstva"] +
      aux$count[aux$labels == "Ostatn\u00ED \u00FAst\u0159edn\u00ED"] +
      aux$count[aux$labels == "Sbory"] +
      aux$count[aux$labels == "Ne\u00FAst\u0159edn\u00ED st. spr\u00E1va"] +
      aux$count[aux$labels == "Ostatn\u00ED v\u010D. arm\u00E1dy"]
  )
)

tree_data <- rbind(aux, to_append)

tree_data <- tree_data %>% mutate("cost_perc" = cost/sum(cost[which(tree_data$parents == "")]),
                                  "count_perc" = count/sum(count[which(tree_data$parents  == "")]),
                                  labels = as.character(labels))
```

```{r priprava, echo=FALSE,warning = FALSE,message = FALSE}
dt <- dt %>%  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
                       fct_relevel(kat_order_all) %>% fct_rev())

abs_metrics <- dt %>%
  filter(rok == 2020, typ_rozpoctu == "SCHV") %>%
  filter(!is.na(as.numeric(kap_num))) %>%
  filter(!name %in% c("ROPO", "SS", "OSS")) %>%
  group_by(kap_name) %>%
  summarise(
    pocet_zamestnancu = sum(pocet_zamestnancu),
    prostredky_na_platy = sum(prostredky_na_platy),
    prumerny_plat = sum(prumerny_plat)
  )

bar_dt <- dt %>%
  filter(rok == 2020, typ_rozpoctu == "SCHV") %>%
  filter(!is.na(kategorie_2014_cz)) %>%
  filter(!is.na(as.numeric(kap_num))) %>%
  filter(!name %in% c("ROPO", "SS", "OSS")) %>%
  group_by(kap_name)%>%
  mutate(bar_name_count = paste(kap_name, " Celkem: ",sum(pocet_zamestnancu))) %>%
  mutate(bar_name_cost = paste(kap_name, " Celkem: ",sum(prostredky_na_platy))) %>%
  mutate(pocet_zamestnancu_agg = sum(pocet_zamestnancu),
         prostredky_na_platy_agg = sum(prostredky_na_platy),
         prumerny_plat_agg = sum(prumerny_plat))
lty <- c(schvaleny = "dash", skutecnost = "solid")
```


<style>
p {
text-align: justify}

h1 {
text-align: left}

</style>

::::{.bs-callout .bs-callout-green}

## Shrnutí

* Téměř polovina z milionu zaměstnanců veřejného sektoru je placena ze státního rozpočtu: 464 tisíc státních zaměstnanců dle údajů pro rok 2020.
* Větší část těchto státních zaměstnanců spadá pod příspěvkové organizace (265 tisíc), zahrnující především školy, a menší část ostatních státních zaměstnanců (198 tisíc) spadá pod řadu různorodých organizací, od armády a policii až po ministerstva a úřady práce. → [více](#zam) + [graf](#zam-tree-pocet)
* Jen malou část státních zaměstnanců lze označit za státní úředníky (zhruba 78 tisíc). → [více](#ured)
* Počet státních úředníků v průběhu posledních dvou dekád kolísal. Mezi roky 2003 a 2010 jejich počet mírně narostl o necelé dva tisíce. Mezi roky 2010 a 2011 došlo k poklesu o tři tisíce během ekonomické krize v době Nečasovy vlády. Mezi lety 2010 a 2015 došlo k celkovému nárůstu o pět tisíc státních úředníků a do roku 2020 jejich počet nedoznal významnější změny. → [více](#ured) + [graf](#ured-pocet)
* Ačkoliv reálné průměrné platy státních úředníků od roku 2013 soustavně rostly → [graf](#ured-plat), od roku 2018 zaostával tento růst znatelně za nárůstem mezd v celé ekonomice. → [více](#ured) + [graf](#ured-plat-rel)

::::

## Úvod

Veřejný sektor celkem zaměstnává téměř 1 milion lidí. Necelá polovina z těchto zaměstnanců veřejného sektoru je dle údajů pro rok 2020 placena ze státního rozpočtu: 265 tisíc skrz příspěvkové organizace, pod které spadají i učitelé a další zaměstnanci škol, a dalších 198 tisíc skrz organizace, které zahrnují například policii, armádu, ministerstva a další úřady. Platy těchto celkem 464 tisíc **státních zaměstnanců** jsou hrazeny ze státního rozpočtu (a takto i definujeme státní zaměstnance, tj. když je jejich plat hrazen ze státního rozpočtu, což je jiné chápání tohoto pojmu než dle zákona o státní službě). Díky tomuto pro ně máme od Ministerstva financí detailní informace o jejich počtech a platech. Tato detailní data v [první části](#zam) této studie analyzujeme. 

Z těchto státních zaměstnanců se dá 78 tisíc považovat za **státní úředníky**. Státní úředníci jsou častým předmětem veřejných diskuzí, je to napříč organizacemi relativně srovnatelná skupina zaměstnanců (alespoň na rozdíl od ostatních státních zaměstnanců) a je to důležitá skupina zaměstnanců z hlediska fungování státu a realizace jeho veřejných politik.
Proto v [druhé části](#ured) této studie analyzujeme vývoj jejich počtů a platů mezi roky 2003 a 2020.

**Kde a za jaké platy pracují** státní zaměstnanci, a státní úředníci především, jsou hlavními otázkami pro tuto studii. Zodpovězení těchto otázek nám umožní chápat vývoj výše platů v kontextu vývoje celé ekonomiky, lépe pochopit potenciál diskutovaných konsolidačních opatření týkajících se státních zaměstnanců, pozorovat zda došlo zavedením Zákona o státní službě k výrazným změnám v počtech či platech státních úředníků nebo zda se změnila efektivita rozpočtového procesu vzhledem k tzv. neobsazeným místům.

Pro zodpovězení otázek v této studii analyzujeme data ze Státních závěrečných účtů 2003-2020, která nám ve zpracovatelné formě poskytlo Ministerstvo financí. Jedná se o stejný datový zdroj  jako ve studii IDEA vydané v červnu 2014 [@bouchal2014]. Data z této dřívější [studie](https://idea.cerge-ei.cz/studies/2014-06-statni-urednici-kolik-jich-vlastne-je-kde-a-za-jake-platy-pracuji) pro roky 2003 až 2012 rozšiřujeme o data pro roky 2013 až 2020. Metodologické a datové detaily popisujeme v [příslušné sekci](#ap1-zdroje) v příloze.

## Státní zaměstnanci {#zam}

### Počet státních zaměstnanců {#zam-pocet}

Celkem 464 tisíc zaměstnanců je placeno ze státního rozpočtu dle údajů pro rok 2020. Tyto státní zaměstnance^[Diskusi pojmu státní zaměstnanec [viz v metodologii](#ap1-statni-zamestnanci)] můžeme dále členit dle regulace zaměstnanosti (graf 1) nebo dle rozpočtových kapitol (graf 2).^[Všechny grafy byly vytvořeny pomocí plotly. Pro detailnější analýzu se může hodit udělat drag+drop výseč přímo v grafu (Zoom button), nebo odškrtnout některé z kategorií v legendě napravo. Double-clickem na kategorii v legendě je možné skrýt všechny kategorie až na tu vybranou kategorii. Pro reset je tam “Reset axes” button.] V příloze vysvětlujeme základní logiku těchto dvou členění, které při diskuzi výsledků níže kombinujeme.

**Státní úředníci** nejlépe odpovídají součtu prvních tří skupin dle regulace zaměstnanosti (graf 1): ministerstva, úřady ústřední i neústřední státní správy (78 tisíc). Na ministerstvech pracuje 23 tisíc lidí, na ostatních ústředních úřadech (například Úřad vlády, Český úřad zeměměřický a katastrální nebo Český statistický úřad) pak pracuje dalších 4 tisíc lidí. Největší část státních úředníků, 51 tisíc, pracuje na úřadech neústřední státní správy, mezi které patří Generální finanční ředitelství, Úřad práce nebo Česká správa sociálního zabezpečení. Z členění dle rozpočtových kapitol (graf 2) vidíme, že zdaleka největší díl zaměstnanosti ve státní správě představují tři velká ministerstva (financí, vnitra, práce a sociálních věcí) a jimi řízené organizace (například Úřad práce, Česká správa sociálního zabezpečení nebo Generální finanční ředitelství), které společně zaměstnávají zhruba 80% státních úředníků (zhruba 63 tisíc).^[Grafy A1 a A2 v příloze ukazují celkové součty platů státních zaměstnanců, které jsou podobně rozděleny jako jejich počty v grafech 1 a 2 (i protože rozdíly v počtech zaměstnanců hrají výraznější roli než rozdíly v průměrných platech).]
Takto vymezeným státním úředníkům se dále věnujeme pomocí analýzy časové řady 2003-2020 v druhé části studie.

**Sbory** (82 tisíc) zahrnují například policisty a hasiče, ale i vězeňské dozorce. V ostatní včetně armády (39 tisíc) je právě armáda pod kapitolou ministerstva obrany zodpovědná za většinu zaměstnanců (32 tisíc). 

**Příspěvkové organizace** mají 265 tisíc zaměstnanců a naprostá většina z nich (254 tisíc) spadá pod kapitolu Ministerstva školství a tělovýchovy, tedy veřejných základních a středních škol. Tato skupina tedy tvoří většinu státních zaměstnanců (byť prakticky jde o zaměstnance škol, které zřizují samosprávy, viz výše). Důležitost příspěvkových organizací včetně učitelů a dalších zaměstnanců škol lze vidět dobře i v členění zaměstnanců dle rozpočtových kapitol (graf 2). 

<a name = "zam-tree-pocet"></a>

```{r tree_plot, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}

A1 <- tree_data %>%
  plot_ly(
    type = "treemap",
    branchvalues = "total",
    labels = ~tree_data$labels,
    parents = tree_data$parents,
    marker=list(colors=color_map),
    values = tree_data$cost,
    hovertemplate = ~ paste("<extra></extra>", " Kategorie: ", 
                            labels, "<br>", " Rozpo\u010Det:", 
                            format(cost, big.mark = " "), "K\u010D", "<br>",
                            " Pod\u00EDl na celku:", round(cost_perc*100,1), "%"),
    domain = list(column = 0)
  ) %>%
  layout(title = list(text = "Graf A1. Výdaje na platy státních zaměstnanců (dle regulace zaměstnanosti)", 
                      y = 0.98)) %>%
  layout( annotations = list(text = "Pozn: Pro bližší detail lze kategorie rozkliknout", 
                             x = 1, y = -0.05, showarrow = FALSE))

tree_plot_count <- tree_data %>%
  plot_ly(
    type = "treemap",
    branchvalues = "total",
    labels = ~tree_data$labels,
    parents = tree_data$parents,
    marker=list(colors=color_map),
    values = tree_data$count,
    hovertemplate = ~ paste("<extra></extra>", " Kategorie: ", labels, "<br>", 
                            " Po\u010Det zam\u011Bstnanc\u016F:", 
                            format(count, big.mark = " "), "<br>", " Pod\u00EDl na celku:", 
                            round(count_perc*100,1), "%"),
    domain = list(column = 0)
  ) %>%
  layout(title = list(text = "Graf 1. Počet státních zaměstnanců (dle regulace zaměstnanosti)", 
                      y = 0.98)) %>%
  layout( annotations = list(text = "Pozn: Pro bližší detail lze kategorie rozkliknout", x = 1, 
                             y = -0.05, showarrow = FALSE))

tree_plot_count
```

### Počet zaměstnanců dle rozpočtových kapitol {#zam-kap}

<a name = "zam-kap-graf"></a>

```{r counts, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
bar_dt %>% group_by(kategorie_2014_cz)%>%
  plot_ly(
    x = ~kap_name, y = ~ pocet_zamestnancu/1000, type="bar", 
    color = ~kategorie_2014_cz, colors = color_map,
    #marker=list(size=10, colors=color_map[bar_dt$kategorie_2014_cz]),
    hovertemplate = ~ ifelse(pocet_zamestnancu > 0, paste(
      "<extra></extra>", " Zdroj:", name, "<br>", "Kapitola:", cz_kap_name, "<br>",
      "Po\u010Det zam\u011Bstnanc\u016F:",
      format(pocet_zamestnancu, big.mark = " "), "<br>", "Celkem za kapitolu: ",
      format(pocet_zamestnancu_agg, big.mark = " ")
    ), ""), hoverinfo = "text"
  ) %>%
  layout(
    
    hovermode = "closest", legend = list(x = 100, y = 0.5),
    annotations = list(text = str_wrap("Poznámka: MŠMT zkresluje graf vzhledem k zahrnutí  učitelů v kategorii “Příspěvkové organizace”. Lze odflitrovat v legendě nebo v grafu.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    title = list(text = "Graf 2. Po\u010Det st\u00E1tn\u00EDch zam\u011Bstnanc\u016F dle rozpo\u010Dtov\u00FDch kapitol (v tis\u00EDc\u00EDch)", y = 0.98),
    xaxis = list(title = "Kapitoly",tickmode = "array",categoryorder = "array", 
                 categoryarray = arrange(bar_dt, desc(pocet_zamestnancu_agg))$kap_name),
    yaxis = list(title = "Po\u010Det zam\u011Bstnanc\u016F"), barmode = "stack"
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), 
         displaylogo = FALSE)

```

```{r costs, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE, include = F}
A2 <- plot_ly(bar_dt,
              x = ~kap_name, y = ~ prostredky_na_platy / 1000000000, 
              color = ~kategorie_2014_cz, colors = color_map,
              hovertemplate = ~ ifelse(prostredky_na_platy > 0, paste("<extra></extra>", " Zdroj:", 
                                                                      name, "<br>", "Kapitola:", 
                                                                      cz_kap_name, "<br>", "Platy kumulativn\u011B:", format(prostredky_na_platy, big.mark = " "), "K\u010D", "<br>", "Celkem za kapitolu: ",
                                                                      format(prostredky_na_platy_agg, big.mark = " "), 
                                                                      "K\u010D"), ""),
              hoverinfo = "text"
) %>%
  add_bars() %>%
  layout(
    hovermode = "closest",
    title = list(text = "Graf A2. Výdaje na platy státních zaměstnanců (v miliard\u00E1ch)", y = 0.98),
    xaxis = list(title = "Kapitoly", categoryorder = "array", 
                 categoryarray = arrange(bar_dt, desc(prostredky_na_platy_agg))$kap_name),
    yaxis = list(title = "Platy"),
    barmode = "stack", legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), displaylogo = FALSE)
```


### Průměrné platy státních zaměstnanců {#zam-platy}

Průměrné platy státních zaměstnanců po jednotlivých rozpočtových kapitolách rozdělených podle regulace zaměstnanosti ukazuje graf 3.^[Graf A3 v příloze ukazuje tyto průměrné platy ve vztahu k průměrné mzdě v národním hospodářství - mnohé z těchto platů jsou pod tímto průměrem.] 

Průměrné platy státních zaměstnanců se liší dle typu organizací i napříč jednotlivými organizacemi. Na ministerstvech jsou průměrné platy od 40 tisíc Kč (měsíčně hrubého) na Ministerstvu pro životní prostředí až po 56 tisíc Kč na Ministerstvu obrany, ale všude jsou vyšší než na některých úřadech ústřední státní správy jako je Český statistický úřad (39 tisíc Kč) nebo neústřední státní správy jako je Český úřad zeměměřický a katastrální (34 tisíc Kč). (Graf A3 v příloze ukazuje tyto průměrné platy ve vztahu k průměrné mzdě v národním hospodářství - mnohé z těchto platů jsou pod tímto průměrem.) Tyto rozdílné platy pravděpodobně odrážejí především rozdíly například v charakteru práce, lokalitě, požadovaném i průměrném vzdělání, průměrné délce služby nebo podílu vedoucích pracovníků. O těchto relevantních charakteristikách nemáme v dostupných datech žádné informace a proto nejsme schopni tyto rozdíly nijak osvětlit. Místo toho se v další části věnujeme skupině státních zaměstnanců, která je v některých těchto charakteristikách relativně podobná: státním úředníkům.

<a name = "zam-plat-graf"></a>

```{r mean_costs_ALL, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
kat_means <- bar_dt %>% group_by(kategorie_2014_cz)%>%
  summarise(prumerny_plat_mean = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)/12)/1e3)

vline <- function(x = 0, color = "black") {
  list(
    type = "line", 
    y0 = 0, 
    y1 = 1, 
    yref = "paper",
    x0 = x, 
    x1 = x, 
    line = list(color = color)
  )
}

dt_mean_salary_all <- dt %>% 
  filter(typ_rozpoctu == "SKUT", kategorie_2014 != "Statni sprava", rok == 2020) %>% 
  summarise(prumerny_plat = round(sum(prostredky_na_platy)/sum(pocet_zamestnancu)/12/1e3)) %>% 
  pull(prumerny_plat)

bar_dt %>%
  filter(prumerny_plat>25000) %>% left_join(kat_means,by="kategorie_2014_cz")%>%
  mutate(prumerny_plat = prumerny_plat/1e3) %>% 
  plot_ly(
    x = ~prumerny_plat, y = ~ kategorie_2014_cz, color = ~kategorie_2014_cz, colors = color_map,
    type = "scatter" , mode = "line+markers",line = list( color='gainsboro',width=3),
    hovertemplate = ~ ifelse(prostredky_na_platy > 0, 
                             paste("<extra></extra>", " Zdroj:", name, "<br>", 
                                   "Kapitola:", cz_kap_name, "<br>", "Pr\u016Fm\u011Brn\u00FD plat:", 
                                   format(prumerny_plat, big.mark = " "), "K\u010D"), ""),
    hoverinfo = "text"
  ) %>%
  add_trace(type="scatter",mode="markers",  
            hovertemplate = ~ ifelse(prostredky_na_platy > 0, 
                                     paste("<extra></extra>", "Pr\u016Fm\u011Br za kategorii:", "<br>", 
                                           format(round(prumerny_plat_mean*1e3,0), big.mark = " "), 
                                           "K\u010D"), 
                                     ""),
            hoverinfo = "text", 
            marker=list(size=8,color="black"),
            x = ~prumerny_plat_mean, y=~kategorie_2014_cz) %>%
  layout(
    shapes = list(vline(dt_mean_salary_all)),
    hovermode = "closest",
    title = list(text = "Graf 3. Pr\u016Fm\u011Brn\u00E9 platy st\u00E1tn\u00EDch zam\u011Bstnanc\u016F (v tis\u00EDc\u00EDch)", y = 0.98),
    xaxis = list(title = ""),
    yaxis = list(title = ""),
    showlegend = F
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), 
         displaylogo = FALSE)
```

```{r mean_costs_SS, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}

aux <- bar_dt %>% 
  filter(name %in% c("UO","OSS_SS")) %>% 
  ungroup()
B3 <- aux %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední")) %>%
  group_by(kategorie_2014_cz) %>%
  mutate(wage_to_general = (ifelse(kategorie_2014 %in% c("Ministerstva", "Ostatni ustredni"),
                                   prumerny_plat / phasal_all-1, prumerny_plat / czsal_all-1))) %>%
  group_map(~ plot_ly(
    data = ., x = ~kap_name, y = ~ prumerny_plat / 1000, type = "bar", 
    color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~ ifelse(prumerny_plat > 0, paste(
      "<extra></extra>", " Zdroj:", name, "<br>", "Kapitola:", 
      cz_kap_name, "<br>", "Pr\u016Fm\u011Brn\u00FD plat:",
      format(prumerny_plat, big.mark = " "), "K\u010D"
    ), ""), 
    hoverinfo = "text"
  ) %>%
    add_annotations(
      text = ~unique(kategorie_2014_cz),
      x = 1,
      y = 1.05,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 15),
      xanchor = "right",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(
      yaxis = list(title = "", range = c(20, 60)), 
      xaxis = list(tickfont = list(size = 10), 
                   showticklabels = T, 
                   tickangle = 0, 
                   "categoryorder" = "total descending"),
      title = list(text = "Graf B3. Pr\u016Fm\u011Brn\u00E9 platy st\u00E1tn\u00EDch zam\u011Bstnanc\u016F (v tis\u00EDc\u00EDch)", x = 50, y = 0.98), legend = list(x = 50, y = 0.5), 
      showlegend = F
    ), keep = TRUE) %>%
  subplot(nrows = 3, shareY = TRUE)
```

```{r mean_costs_v2, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
A3 <- bar_dt %>%
  group_by(kategorie_2014_cz) %>%
  filter(kategorie_2014 != "Prispevkove organizace") %>%
  filter(kategorie_2014_cz != "Sbory") %>%
  mutate(wage_to_general = (ifelse(kategorie_2014 %in% c("Ministerstva", "Ostatni ustredni"), 
                                   prumerny_plat / phasal_all - 1, prumerny_plat / czsal_all-1))) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa")) %>% 
  group_map(~ plot_ly(
    data = ., x = ~kap_name, y = ~ (wage_to_general) * 100, 
    type = "bar", color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~  paste(
      "<extra></extra>", "Zdroj:", name, "<br>", "Kapitola:", cz_kap_name, "<br>", 
      "Pr\u016Fm\u011Brn\u00FD plat:",
      format(prumerny_plat, big.mark = " "), "K\u010D", "<br>", 
      "Rozd\u00EDl k pr\u016Fm\u011Brn\u00E9 mzd\u011B:",
      round(wage_to_general*100,1), "%"), 
    hoverinfo = "text"
  ) %>%
    add_annotations(
      text = ~unique(kategorie_2014_cz),
      x = 0.05,
      y = 0.9,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 15),
      xanchor = "left",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(
      yaxis = list(title = "",range=c(-50,70),
                   ticksuffix="%"), xaxis = list(tickfont = list(size = 10), 
                                                 showticklabels = T, 
                                                 tickangle = 90, 
                                                 "categoryorder" = "total ascending"),
      title = list(text = "Graf A3. Pr\u016Fm\u011Brn\u00E9 platy st\u00E1tn\u00EDch zam\u011Bstnanc\u016F (ve vztahu k pr\u016Fm\u011Brn\u00E9 mzd\u011B v n\u00E1rodn\u00EDm hospod\u00E1\u0159stv\u00ED )", 
                   x = 50, y = 0.98), legend = list(x = 50, y = 0.5), 
      showlegend = F
    ), keep = TRUE) %>%
  subplot(nrows = 2, shareY = F)
```

## Státní úředníci {#ured}

### Počty a platy státních úředníků 2003-2020 {#ured-pocty-platy}

Státní úředníci jsou důležitou podskupinou státních zaměstnanců a proto ukazujeme vývoj jejich počtu a platů v čase mezi lety 2003 a 2020.

Graf 4 ukazuje počet státních úředníků. Mezi lety 2003 a 2010 mírný nárůst o necelé dva tisíce z 59 na 61 tisíc. Mezi roky 2010 a 2011 došlo k poklesu o tři tisíce během ekonomické krize v době Nečasovy vlády (detailněji viz studie z roku 2014). Mezi lety 2010 a 2015 došlo k celkovému nárůst o pět tisíc státních úředníků a do roku 2020 jejich počet kolísal kolem 64 tisíc.^[Pro konzistentnost v průběhu let graf nezahrnuje zaměstnance ministerstev vnitra a zahraničních věcí, viz popis dat. Bez nich máme v roce 2020 64 tisíc státních úředníků, s nimi by to bylo 78 tisíc, viz graf B4 v příloze.]

<a name = "ured-pocet"></a>

```{r count_2014, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
#kapitoly s velkým nárůstem zaměstnanců v období 2011-2012
zk <- dt %>% filter(rok %in% c(2011,2012)) %>% 
  filter(typ_rozpoctu == "SKUT", kategorie_2014 %in% c("Ministerstva")) %>%
  select(rok,full_kap_name,kap_name,pocet_zamestnancu) %>%
  pivot_wider(names_from = c("rok"),names_prefix = "rok_",
              values_from = c("pocet_zamestnancu")) %>%
  mutate(perc_change = round((rok_2012-rok_2011)/rok_2011*100,1)) %>%
  arrange(desc(perc_change))


dt %>%
  filter(typ_rozpoctu == "SKUT",
         kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni")) %>%
  filter(!kap_num %in% c(314, 306)) %>%
  group_by(kategorie_2014_cz, rok) %>%
  summarise(pocet_zamestnancu = sum(pocet_zamestnancu)) %>%
  group_by(rok) %>%
  mutate(pocet_zamestnancu_agg = sum(pocet_zamestnancu)) %>%
  plot_ly(
    x = ~rok, y = ~ pocet_zamestnancu / 1000, color = ~kategorie_2014_cz, 
    colors = color_map,
    hovertemplate = ~ paste(
      "<extra></extra>", "Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>",
      "Zam\u011Bstnanc\u016F:", format(pocet_zamestnancu, big.mark = " "), "<br>",
      "Celkem za rok: ", format(pocet_zamestnancu_agg, big.mark = " ")
    ),
    hoverinfo = "text"
  ) %>%
  add_bars() %>%
  layout(
    title = list(text = "Graf 4. Počet státních úředníků 2003-2020 (v tisících)", 
                 y = 0.98),
    annotations = list(text = str_wrap("Pro přehlednost vynechány kapitoly MZV a MV, které by vzhledem ke strukturálním změnám způsobily kumulativní nárůst o zhruba 60% na Ministerstvech mezi roky 2011-2012. Graf s kapitolami MZV a MV je v příloze",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor = 'white',
                       borderwidth = 1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = ""),
    barmode = "stack", legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), 
         displaylogo = FALSE)
```

Graf 5 ukazuje reálné **průměrné hrubé měsíční platy** státních úředníků (v tisících; ceny roku 2020), které v roce 2020 byly 52 tisíc Kč na ministerstvech, 47 tisíc Kč na ostatních ústředních úřadech, 45 tisíc ve státní správě a 38 tisíc v neústřední státní správě. Podobné rozdíly se udržovaly v průběhu celého období, během něhož pozorujeme podobný vývoj ve všech typech organizací. Reálné průměrné hrubé měsíční platy rostly z průměrů 28 až 39 tisíc Kč v roce 2003 do roku 2008 či 2009 a pak klesaly až do roku 2013, odkdy rostou. 

```{r cost_2014, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
vyvoj_bar <- dt %>%
  filter(typ_rozpoctu == "SKUT", kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", "Ostatni ustredni")) %>%
  filter(!kap_num %in% c(314, 306)) %>%
  group_by(kategorie_2014_cz, rok) %>%
  summarise(
    prostredky_na_platy_nom = sum(prostredky_na_platy),
    prostredky_na_platy_real = sum(prostredky_na_platy * base_2020)
  ) %>%
  group_by(rok) %>%
  mutate(prostredky_na_platy_nom_agg = sum(prostredky_na_platy_nom),
         prostredky_na_platy_real_agg = sum(prostredky_na_platy_real))
A4 <- vyvoj_bar %>%
  plot_ly(
    x = ~rok, y = ~ prostredky_na_platy_nom / 1000000000, color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~ paste(
      "<extra></extra>", "Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>",
      "Rozpo\u010Det:", format(prostredky_na_platy_nom, big.mark = " "), "K\u010D",
      "<br>",
      "Celkem za rok: ", format(prostredky_na_platy_nom_agg, big.mark = " "), "K\u010D"
    ),
    hoverinfo = "text"
  ) %>%
  add_bars() %>%
  layout(
    title = list(text = "Graf A4. Výdaje na platy státních úředníků 2003-2020 (v miliardách Kč)", y = 0.98),
    annotations = list(text = str_wrap("Pro přehlednost vynechány kapitoly MZV a MV, které by vzhledem ke strukturálním změnám způsobily kumulativní nárůst o zhruba 60% na Ministerstvech mezi roky 2011-2012.<br>V roce 2011 došlo k změně klasifikace státních zaměstnanců, která způsobila část změny v počtu státních úředníků z roku 2010 na rok 2011. Detaily viz text.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = ""),
    barmode = "stack", legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), displaylogo = FALSE)

A5 <- vyvoj_bar %>%
  plot_ly(
    x = ~rok, y = ~ prostredky_na_platy_real / 1000000000, 
    color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~ paste(
      "<extra></extra>", "Rok:", rok, "<br>", "Kategorie:", 
      kategorie_2014_cz, "<br>",
      "Rozpo\u010Det:", format(prostredky_na_platy_real, big.mark = " "), "K\u010D",
      "<br>",
      "Celkem za rok: ", format(prostredky_na_platy_real_agg, big.mark = " "), "K\u010D"
    ),
    hoverinfo = "text"
  ) %>%
  add_bars() %>%
  layout(
    title = list(text = "Graf A5. Reálné výdaje na platy státních úředníků 2003-2020 (v miliardách Kč, ceny roku 2020)", y = 0.98),
    annotations = list(text = str_wrap("Pro přehlednost vynechány kapitoly MZV a MV, které by vzhledem ke strukturálním změnám způsobily kumulativní nárůst o zhruba 60% na Ministerstvech mezi roky 2011-2012.<br>V roce 2011 došlo k změně klasifikace státních zaměstnanců, která způsobila část změny v počtu státních úředníků z roku 2010 na rok 2011. Detaily viz text.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = ""),
    barmode = "stack", legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d",
                                    "select2d", "autoScale2d"), displaylogo = FALSE)
```

```{r cost_cumsum_2014, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
aux2 <- dt %>%
  filter(kategorie_2014_cz %in% c("Státní správa","Ministerstva", "Ostatní ústřední",
                                  "Neústřední st. správa"), typ_rozpoctu == "SKUT") %>%
  filter(!kap_num %in% c(314, 306)) %>%
  # not included in previous
  group_by(kategorie_2014_cz, rok) %>%
  summarise(
    prostredky_na_platy = sum(prostredky_na_platy),
    base_2003 = mean(base_2003),
    pocet_kapitol = length(kap_num),
    platy_weighted = prostredky_na_platy / pocet_kapitol
  ) %>%
  mutate(plat_base = prostredky_na_platy[1]) %>%
  mutate(plat_base_weighted = platy_weighted[1]) %>%
  mutate(output = (prostredky_na_platy / (base_2003 * plat_base) - 1)) %>%
  mutate(output_weighted = (prostredky_na_platy / base_2003 - plat_base) / plat_base) %>% 
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) 
A6 <- aux2 %>%
  plot_ly(
    x = ~rok, y = ~ output * 100, type = "scatter", color = ~kategorie_2014_cz, colors = color_map,
    linetypes = lty,mode = "line",
    text = ~ paste(
      " Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>",
      "Hodnota:", round(output, 4) * 100, "%"
    ),
    hoverinfo = "text",
    legendgroup = ~kategorie_2014_cz
  ) %>%
  layout(
    title = list(text = "Graf A6. Kumulovaná změna reálných výdajů na platy státních úředníků 2003-2020 (v %)", y = 0.98),
    annotations = list(text = str_wrap("Pro přehlednost vynechány kapitoly MZV a MV, které by vzhledem ke strukturálním změnám způsobily kumulativní nárůst o zhruba 60% na Ministerstvech mezi roky 2011-2012.<br>V roce 2011 došlo k změně klasifikace státních zaměstnanců, která způsobila část změny v počtu státních úředníků z roku 2010 na rok 2011. Detaily viz text.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = "", tickprefix = "+", ticksuffix = "%"), 
    legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), displaylogo = FALSE)
```

<a name = "ured-plat"></a>

```{r mean_wage_2020, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", "Ostatni ustredni", "Statni sprava"), typ_rozpoctu == "SKUT") %>%
  #filter(!kap_num %in% c(314,306)) %>% #not included in previous
  group_by(rok, kategorie_2014_cz) %>%
  summarise(
    prumerny_plat_agg = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)) / 12,
    base_2020 = mean(base_2020),
    max_change_kap = kap_name[which.max(wage_in_2020_change)],
    max_change = round(max(wage_in_2020_change, na.rm = T), 4),
    min_change_kap = kap_name[which.min(wage_in_2020_change)],
    min_change = round(min(wage_in_2020_change, na.rm = T), 4)
  ) %>%
  mutate(wage_in_2020 = prumerny_plat_agg * base_2020) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) %>%
  plot_ly(
    x = ~rok, y = ~ wage_in_2020 / 1000, type = "scatter", color = ~kategorie_2014_cz,
    colors = color_map,mode = "line", linetypes = lty,
    text = ~ paste(
      " Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>", "Hodnota:", 
      format(round(wage_in_2020, 0), big.mark = " "), "K\u010D", "<br>",
      "Nejv\u011Bt\u0161\u00ED n\u00E1rust:", "<br>", max_change_kap, ": ", 
      max_change * 100, " %", "<br>",
      "Nejmen\u0161\u00ED n\u00E1rust:", "<br>", 
      min_change_kap, ": ", 
      min_change * 100, " %", "<br>"
    ),
    hoverinfo = "text",
    legendgroup = ~kategorie_2014_cz
  ) %>%
  layout(
    title = list(text = "Graf 5. Reálné průměrné hrubé měsíční platy (v tisících; ceny roku 2020)", y = 0.98),
    xaxis = list(title = ""),
    yaxis = list(title = ""), legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), displaylogo = FALSE)

```

```{r mean_wage_pct_change_2020, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
A7 <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", "Ostatni ustredni", "Statni sprava"), typ_rozpoctu == "SKUT") %>%
  filter(!kap_num %in% c(314, 306)) %>%
  # not included in previous
  group_by(kategorie_2014_cz, rok) %>%
  summarise(
    prumerny_plat_agg = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)) / 12,
    base_2020 = mean(base_2020),
    max_change_kap = kap_name[which.max(mzda_prumer_skut_ke_skut)],
    max_change = round(max(mzda_prumer_skut_ke_skut, na.rm = T), 4),
    min_change_kap = kap_name[which.min(mzda_prumer_skut_ke_skut)],
    min_change = round(min(mzda_prumer_skut_ke_skut, na.rm = T), 4)
  ) %>%
  mutate(wage_in_2020 = prumerny_plat_agg * base_2020) %>%
  group_by(kategorie_2014_cz) %>%
  arrange(rok) %>%
  mutate(wage_base = wage_in_2020[1]) %>%
  mutate(cum_pct_wage_change = (wage_in_2020 - wage_base) / wage_base) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) %>%
  plot_ly(
    x = ~rok, y = ~ cum_pct_wage_change * 100, type = "scatter", 
    color = ~kategorie_2014_cz, colors = color_map, mode = "line", linetypes = lty,
    text = ~ paste(
      " Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>",
      "Nejv\u011Bt\u0161\u00ED n\u00E1rust:", "<br>", max_change_kap, ": ", max_change * 100, " %", "<br>",
      "Nejmen\u0161\u00ED n\u00E1rust:", "<br>", min_change_kap, ": ", min_change * 100, " %", "<br>"
    ),
    hoverinfo = "text",
    legendgroup = ~kategorie_2014_cz
  ) %>%
  layout(
    title = list(text = "Graf A7. Kumulovaná změna reálných průměrných platů státních úředníků (v %)", y = 0.98),
    annotations = list(text = str_wrap("Pro přehlednost vynechány kapitoly MZV a MV, které by vzhledem ke strukturálním změnám způsobily kumulativní nárůst o zhruba 60% na Ministerstvech mezi roky 2011-2012.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = "", tickprefix = "+", ticksuffix = "%"), legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), displaylogo = FALSE)


```

Tyto o inflaci upravené platy ale nezachycují všechny změny v čase, kdy došlo k výrazným nárůstům mezd v celém národním hospodářství. Graf 6 proto ukazuje **průměrný plat ve státní správě ve vztahu k průměrné mzdě** v národním hospodářství a pro ministerstva a ústřední orgány srovnání s průměrným platem v Praze (vzhledem k jejich předpokládané většinové lokaci v hlavním městě). Dle tohoto ukazatele průměrné platy klesly mezi roky 2003 a 2020 ve všech typech organizací. K výraznému poklesu došlo kolem let 2009-2012, ale znatelný pokles zaznamenal tento ukazatel i mezi roky 2018 a 2020. Ačkoliv reálné průměrné hrubé měsíční platy státních úředníků v těchto nedávných letech rostly (Graf 5), zaostával tento růst znatelně za nárůstem mezd v celé ekonomice.^[Graf A4 ukazuje reálné výdaje na platy státních úředníků mezi lety 2003 a 2020 v miliardách Kč a Graf A5 ukazuje to stejné v cenách roku 2020 a tedy očištěné o inflaci. ukazuje kumulovanou změnu reálných výdajů na platy státních úředníků 2003-2020. Nárůst výdajů na platy státních úředníků z části kopírují trend počtu státních úředníků a částečně také odráží ekonomický vývoj.]

<a name = "ured-plat-rel"></a>

```{r wage_to_general, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni", "Statni sprava"), 
         typ_rozpoctu == "SKUT") %>%
  #filter(!kap_num %in% c(314, 306)) %>%
  group_by(kategorie_2014, kategorie_2014_cz, rok) %>%
  summarise(
    wage_to_general = mean(wage_to_general),
    prumerny_plat_agg = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)) / 12,
    max_change_kap = kap_name[which.max(mzda_k_nh)],
    phasal_all = mean(phasal_all),
    czsal_all = mean(czsal_all),
    max_change = round(max(mzda_k_nh, na.rm = T), 4),
    min_change_kap = kap_name[which.min(mzda_k_nh)],
    min_change = round(min(mzda_k_nh, na.rm = T), 4)
  ) %>%
  mutate(wage_to_general = (ifelse(kategorie_2014 %in% c("Ministerstva", "Ostatni ustredni"), 
                                   prumerny_plat_agg / phasal_all, prumerny_plat_agg / czsal_all))) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) %>%
  plot_ly(
    x = ~rok, y = ~ wage_to_general * 100, type = "scatter", color = ~kategorie_2014_cz,
    colors = color_map,mode = "line", linetypes = lty,
    text = ~ paste(
      " Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>",
      "Nejv\u011Bt\u0161\u00ED n\u00E1rust:", "<br>", max_change_kap, ": ", 
      max_change * 100, " %", "<br>",
      "Nejmen\u0161\u00ED n\u00E1rust:", "<br>", min_change_kap, ": ", 
      min_change * 100, " %", "<br>"
    ),
    hoverinfo = "text",
    legendgroup = ~kategorie_2014_cz
  ) %>%
  layout(
    title = list(text = "Graf 6. Průměrný plat ve státní správě ve vztahu k průměrné mzdě v národním hospodářství", y = 0.98),
    annotations = list(text = str_wrap("Poznámky: Pro ministerstva a ostatní ústřední orgány použité hodnoty průměrné mzdy v Praze. V ostatních případech je jako reference použitý průměrný plat v národním hospodářství. Hodnota 100% znamená, že průměrný plat v kategorii je stejný jako průměrný plat v národním hospodářství. Popisky “Největší a nejmenší nárust” zde vyjadřují procentuální změnu platu ve vztahu k průměrnému platu v ČR. Tedy pokud plat na Ministerstvu financí byl v jednom roce roven 115% pražského platu, a další rok vzrostl na 130%, největší nárůst by byl 15%.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = "", ticksuffix = "%"), legend = list(x = 100, y =0.8)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d", 
                                    "select2d", "autoScale2d"), displaylogo = FALSE)


```

```{r 2020_effect, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}

line <- list(
  type = "line",
  line = list(color = "pink"),
  xref = "paper",
  yref = "paper",
  "y0" = 0,
  "y1" = 1,
  "x0" = 0,
  "x1" = 1
)

infl <- dt %>% filter(rok == 2004) %>% select(base_2020) %>% first() %>% pull()
A8 <- dt %>%
  filter(!is.na(kategorie_2014_cz), typ_rozpoctu == "SKUT", kategorie_2014 != "Statni sprava") %>%
  filter(rok %in% c(2004, 2020)) %>%
  filter(!kap_num %in% c(314, 306)) %>%
  group_by(kategorie_2014_cz, rok) %>%
  summarise(
    base_2020 = base_2020[1],
    zam_skutecnost = sum(pocet_zamestnancu),
    plat_skutecnost = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)) / 12
  ) %>%
  as.data.table() %>%
  dcast(kategorie_2014_cz ~ rok, value.var = c("zam_skutecnost", "plat_skutecnost")) %>%
  mutate(
    zam_change = (zam_skutecnost_2020/zam_skutecnost_2004 - 1),
    plat_change = (plat_skutecnost_2020/(plat_skutecnost_2004*infl) - 1)
  ) %>%
  plot_ly(
    x = ~ plat_change * 100, y = ~ zam_change * 100, color = ~kategorie_2014_cz,colors = color_map,
    text = ~ paste(
      " Zm\u011Bna platu:", round(plat_change, 4) * 100, "%", "<br>",
      "Zm\u011Bna po\u010Dtu zam\u011Bstnanc\u016F:", round(zam_change, 4) * 100, "%"
    ),
    hoverinfo = "text",
    legendgroup = ~kategorie_2014_cz
  ) %>%
  layout(
    title = list(text = "Graf A8. Celkové reálné změny platů a počtu zaměstnanců v období 2004-2020", y = 0.98),
    annotations = list(text = str_wrap("Pro přehlednost vynechány kapitoly MZV a MV, které by vzhledem ke strukturálním změnám způsobily kumulativní nárůst o zhruba 60% na Ministerstvech mezi roky 2011-2012.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    showlegend = FALSE,
    xaxis = list(title = "Zm\u011Bna pr\u016Fm\u011Brn\u00E9ho platu", 
                 ticksuffix = "%",range = c(-5,65)),
    yaxis = list(title = "Zm\u011Bna po\u010Dtu zam\u011Bstnanc\u016F", 
                 showtickprefix = "last",range = c(-20,15),
                 tickprefix = "+", 
                 ticksuffix = "%", showticksuffix = "all"), 
    legend = list(x = 100, y = 0.5)
  ) %>%
  add_markers() %>%
  add_text(text = ~ str_wrap(kategorie_2014_cz, 10), textposition = "top center")
```

```{r prac_mista_skut_rozp_kap, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
kaps_to_exclude <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", "Ostatni ustredni", "Statni sprava")) %>%
  filter(typ_rozpoctu != "SCHV") %>%
  select(rok, kategorie_2014_cz, typ_rozpoctu, kap_num, pocet_zamestnancu, full_kap_name) %>%
  spread(key = typ_rozpoctu, value = pocet_zamestnancu) %>%
  group_by(rok, kap_num) %>%
  summarise(
    SKUT = sum(SKUT),
    UPRAV = sum(UPRAV)
  ) %>%
  ungroup() %>%
  group_by(kap_num) %>%
  summarise(max_skut = max(SKUT)) %>%
  filter(max_skut < 100) %>%
  pull(kap_num)


A9 <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni", "Statni sprava")) %>%
  filter(typ_rozpoctu != "SCHV") %>%
  filter(!kap_num %in% c(kaps_to_exclude, 312)) %>%
  select(rok, kategorie_2014_cz, typ_rozpoctu, kap_name, pocet_zamestnancu, cz_kap_name) %>%
  spread(key = typ_rozpoctu, value = pocet_zamestnancu) %>%
  group_by(rok, kap_name, cz_kap_name) %>%
  summarise(
    SKUT = sum(SKUT),
    UPRAV = sum(UPRAV)
  ) %>%
  mutate(diff = (SKUT - UPRAV) / UPRAV) %>%
  group_by(kap_name) %>%
  arrange(rok) %>%
  group_map(~ plot_ly(
    data = ., x = ~rok, y = ~ diff * 100, type = "bar", color = ~kap_name, 
    colors = color_map_kap,
    hovertemplate = ~ paste(
      "<extra></extra>",
      "Rok:", rok, "<br>",
      "Kapitola:", cz_kap_name, "<br>",
      "Pl\u00E1novan\u00FD po\u010Det zam\u011Bstnanc\u016F", ": ", 
      format(UPRAV, big.mark = " "), "<br>",
      "Skute\u010Dn\u00FD po\u010Det zam\u011Bstnanc\u016F", ": ", 
      format(SKUT, big.mark = " ")
    )
  ) %>%
    add_annotations(
      text = ~unique(kap_name),
      x = 0.2,
      y = 1.05,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 9),
      xanchor = "center",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(yaxis = list(title = "", range = c(-30, 5), ticksuffix = "%"), 
           xaxis = list(tickangle = 90), legend = list(x = 100, y = 0.5)), keep = TRUE) %>%
  subplot(nrows = 5, shareX = TRUE, shareY = TRUE) %>%
  layout(title = list(text = "Graf A9. Rozdíl mezi schváleným a skutečným počtem zaměstnanců (v %)", 
                      y = 0.98), showlegend = FALSE)
```

```{r platy_skut_rozp_kap, echo=FALSE, out.width="100%",warning = FALSE,warning = FALSE,message = FALSE}
kap_order <- ifelse(substr(kaps,1,1) == "M",1,2)
names(kap_order) <- kaps
kap_order <- sort(kap_order)

A10 <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", "Ostatni ustredni", "Statni sprava")) %>%
  filter(typ_rozpoctu != "SCHV") %>%
  filter(!kap_num %in% c(kaps_to_exclude, 312)) %>%
  select(rok, kategorie_2014_cz, typ_rozpoctu, kap_name, prostredky_na_platy,
         pocet_zamestnancu, cz_kap_name) %>%
  group_by(rok, cz_kap_name,kap_name, typ_rozpoctu) %>%
  summarise(prumerny_plat = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)/12)) %>%
  spread(key = typ_rozpoctu, value = prumerny_plat) %>%
  group_by(rok, kap_name, cz_kap_name) %>%
  mutate(diff = (SKUT - UPRAV) / UPRAV) %>%
  group_by(kap_name) %>%
  arrange(rok) %>%
  group_map(~ plot_ly(
    data = ., x = ~rok, y = ~ diff * 100, type = "bar", color = ~kap_name, 
    colors = color_map_kap,
    hovertemplate = ~ paste(
      "<extra></extra>",
      "Rok:", rok, "<br>",
      "Kapitola:", cz_kap_name, "<br>",
      "Pl\u00E1novan\u00FD pr\u016Fm\u011Brn\u00FD plat", ": ", 
      format(round(UPRAV, 0), big.mark = " "), "K\u010D", "<br>",
      "Skute\u010Dn\u00FD pr\u016Fm\u011Brn\u00FD plat", ": ", 
      format(round(SKUT, 0), big.mark = " "), "K\u010D"
    )
  ) %>%
    add_annotations(
      text = ~unique(kap_name),
      x = 0.2,
      y = 1.03,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 9),
      xanchor = "center",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(yaxis = list(title = "", range = c(0, 30), ticksuffix = "%"), 
           xaxis = list(tickangle = 90), legend = list(x = 100, y = 0.5)), 
  keep = TRUE) %>%
  subplot(nrows = 5, shareX = TRUE, shareY = T) %>%
  layout(title = list(text = "Graf A10. Rozdíl v průměrných platech mezi schváleným rozpočtem a skutečností (v %)",
                      y = 0.98), showlegend = FALSE)

```

```{r prac_mista_skut_rozp, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
A11 <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni", "Statni sprava")) %>%
  filter(typ_rozpoctu != "SCHV") %>%
  select(rok, kategorie_2014_cz, typ_rozpoctu, kap_num, pocet_zamestnancu) %>%
  spread(key = typ_rozpoctu, value = pocet_zamestnancu) %>%
  group_by(rok, kategorie_2014_cz) %>%
  summarise(
    SKUT = sum(SKUT),
    UPRAV = sum(UPRAV)
  ) %>%
  mutate(diff = (SKUT - UPRAV) / UPRAV) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) %>% 
  group_by(kategorie_2014_cz) %>%
  arrange(rok) %>%
  group_map(~ plot_ly(
    data = ., x = ~rok, y = ~ diff * 100, type = "bar", 
    color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~ paste(
      "<extra></extra>",
      "Rok:", rok, "<br>",
      "Pl\u00E1novan\u00FD po\u010Det zam\u011Bstnanc\u016F", ": ", 
      format(UPRAV, big.mark = " "), "<br>",
      "Skute\u010Dn\u00FD po\u010Det zam\u011Bstnanc\u016F", ": ", 
      format(SKUT, big.mark = " ")
    )
  ) %>%
    add_annotations(
      text = ~unique(kategorie_2014_cz),
      x = 0.4,
      y = 1.02,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 12),
      xanchor = "center",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(yaxis = list(title = "", range = c(-15, 1), ticksuffix = "%"), 
           legend = list(x = 100, y = 0.5), showlegend = F), keep = TRUE) %>%
  subplot(nrows = 2, shareX = TRUE, shareY = TRUE) %>%
  layout(title = list(text = "Graf A11. Rozdíl mezi schváleným a skutečným počtem zaměstnanců (v %)", 
                      y = 0.98))
```

```{r platy_skut_rozp, echo=FALSE, out.width="100%",warning = FALSE,warning = FALSE,message = FALSE}
A12 <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni", "Statni sprava")) %>%
  filter(typ_rozpoctu != "SCHV") %>%
  select(rok, kategorie_2014_cz, typ_rozpoctu, kap_num, prostredky_na_platy, 
         pocet_zamestnancu) %>%
  group_by(rok, kategorie_2014_cz, typ_rozpoctu) %>%
  summarise(prumerny_plat_agg = (sum(prostredky_na_platy) / sum(pocet_zamestnancu)) / 12) %>%
  spread(key = typ_rozpoctu, value = prumerny_plat_agg) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) %>% 
  group_by(rok, kategorie_2014_cz) %>%
  summarise(
    SKUT = sum(SKUT),
    UPRAV = sum(UPRAV)
  ) %>%
  mutate(diff = (SKUT - UPRAV) / UPRAV) %>%
  group_by(kategorie_2014_cz) %>%
  arrange(rok) %>%
  group_map(~ plot_ly(
    data = ., x = ~rok, y = ~ diff * 100, type = "bar", 
    color = ~kategorie_2014_cz,colors= color_map,
    hovertemplate = ~ paste(
      "<extra></extra>",
      "Rok:", rok, "<br>",
      "Pl\u00E1novan\u00FD pr\u016Fm\u011Brn\u00FD plat", ": ", 
      format(round(UPRAV, 0), big.mark = " "), "K\u010D", "<br>",
      "Skute\u010Dn\u00FD pr\u016Fm\u011Brn\u00FD plat", ": ", 
      format(round(SKUT, 0), big.mark = " "), "K\u010D"
    )
  ) %>%
    add_annotations(
      text = ~unique(kategorie_2014_cz),
      x = 0.2,
      y = 1,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 12),
      xanchor = "center",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(yaxis = list(title = "", range = c(0, 15), ticksuffix = "%"), 
           legend = list(x = 100, y = 0.5), showlegend = F), keep = TRUE) %>%
  subplot(nrows = 2, shareX = TRUE, shareY = TRUE) %>%
  layout(title = list(text = "Graf A12. Rozdíl v průměrných platech mezi schváleným rozpočtem a skutečností (v %)", 
                      y = 0.98))
```

```{r Scatter plat narust, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}

infl <- dt %>% filter(rok == 2003) %>% select(base_2020) %>% first() %>% pull()
A13 <- dt %>%
  filter(kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni", "Statni sprava")) %>%
  filter(typ_rozpoctu == "SKUT") %>%
  filter(rok %in% c(2003,2020)) %>%
  select(rok, kategorie_2014_cz, cz_kap_name,kap_name, prumerny_plat, pocet_zamestnancu) %>%
  pivot_wider(names_from = c("rok"),values_from = c("prumerny_plat","pocet_zamestnancu")) %>%
  mutate( #wont be used
    zam_change = (pocet_zamestnancu_2020/pocet_zamestnancu_2003 - 1),
    plat_change = (prumerny_plat_2020/(prumerny_plat_2003*infl) - 1)
  ) %>%
  mutate(kategorie_2014_cz = as.factor(kategorie_2014_cz) %>% 
           fct_relevel("Ministerstva", "Ostatní ústřední",
                       "Neústřední st. správa","Státní správa")) %>% 
  group_by(kategorie_2014_cz) %>% 
  group_map(~ plot_ly(
    data = ., x = ~prumerny_plat_2003/1000, y = ~ plat_change*100, 
    type = "scatter" , mode = "markers", 
    color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~ paste(
      "<extra></extra>",
      "Kapitola: ", cz_kap_name, "<br>",
      "Pr\u016Fm\u011Brn\u00FD plat 2003 ", ": ", 
      format(round(prumerny_plat_2003, 0), big.mark = " "), "K\u010D", "<br>",
      "Pr\u016Fm\u011Brn\u00FD plat 2020", ": ", 
      format(round(prumerny_plat_2020, 0), big.mark = " "), "K\u010D", "<br>",
      "Zm\u011Bna", ": ", format(round(plat_change*100, 1),big.mark = " "), "%" 
    )
  ) %>%
    add_annotations(
      text = ~unique(kategorie_2014_cz),
      x = 0.2,
      y = 1,
      yref = "paper",
      xref = "paper",
      font = list(family = "verdana", size = 12),
      xanchor = "center",
      yanchor = "top",
      showarrow = FALSE
    ) %>%
    layout(yaxis = list(title = "", range = c(15, 75), ticksuffix = "%"),
           xaxis = list(title = "Pr\u016Fm\u011Brn\u00FD plat  v roce 2003", range = c(15, 35)),
           legend = list(x = 100, y = 0.5), showlegend = F) %>%
    add_text(text = ~ str_wrap(kap_name, 10), textposition = "bottom left",
             textfont = list(size = 8)),keep = TRUE) %>%
  subplot(nrows = 2, shareX = T, shareY = T) %>%
  layout(title = list(text = "Graf A13. Procentuální nárůst průměrných platů vs průměrný plat v roce 2003",
                      xaxis = list(title = "Pr\u016Fm\u011Brn\u00FD plat  v roce 2003"), y = 0.98))

```

## Literatura a zdroje {#lit}

::: {#refs}
:::

### Detaily

Statistické ročenky České republiky - za jednotlivé roky. (Zde například za rok 2020: <https://www.czso.cz/csu/czso/10-trh-prace-o73cun42om>)

## Příloha 1: Data a metodologie {#ap1}

### Zdroje dat a základní sledované koncepty {#ap1-zdroje}

#### Hlavní zdroj dat

Hlavním zdrojem této studie jsou data ze **Státních závěrečných účtů** 2003-2020, která jsme ve zpracovatelné formě  obdrželi od Ministerstva financí 10. 3. 2021. Jedná se o data, která odpovídají státnímu výkaznictví zaměstnanců a výdajů na platy hrazených ze státního rozpočtů a tím i rozpočtové skladbě obecně (viz níže).

V datech jsou **počty i platy přepočtené na plné úvazky**. 

V této studii pracujeme především se **skutečnými výdaji** a tedy i s reálně obsazenými zaměstnaneckými místy. Výjimkou je analýza tzv. neobsazených míst, pro jejíž účely porovnáváme schválený rozpočet se skutečností. Neobsazená místa ukazujeme v grafech A9 a A11 a podobným způsobem porovnáváme rozdíly v průměrných platech mezi schváleným rozpočtem a skutečností v grafech A10 a A12.

Státní zaměstnance pro účely této studie definujeme jako ty, placené ze státního rozpočtu. Můžeme je analyzovat členit dle regulace zaměstnanosti nebo dle rozpočtových kapitol. Tato členění shrnuje box níže. 

:::::{.bs-callout .bs-callout-blue}

#### Regulace zaměstnanosti

Státní zaměstnanci jsou podle tzv. regulace zaměstnanosti rozděleni do šesti skupin. Ministerstva (1. skupina) a Ostatní ústřední úřady (2.) spolu dávají Ústřední orgány státní správy. (Kategorii Ústředních orgánů jsme na ministerstva a jiné rozdělili, přestože toto dělení ve vstupních datech MF není.) Když k nim přidáme Neústřední státní správu (3.) a Správu ve složkách obrany, bezpečnostní, celní a právní ochrany (4.), mluvíme dohromady o Státní správě. Když k nim dále přidáme Ostatní organizační složky státu (5.), včetně Armády, máme Organizační složky státu nebo také Rozpočtové organizace. Konečně, přidáním Příspěvkových organizací (6.), získáváme rozpočtové organizace a příspěvkové organizace, které souhrnně označujeme jako státní zaměstnance. 

Zaměstnanci ve školství jsou sice vesměs zaměstnanci škol zřizovaných samosprávami, v rozpočtové dokumentaci jsou ale vedeni jako zaměstnanci příspěvkových organizací v kapitole Ministerstva školství, protože peníze na jejich platy obce dostávají ze státního rozpočtu ve výši stanovené legislativou na centrální úrovni.

#### Rozpočtové kapitoly

Počty zaměstnanců je možné uvádět dle rozpočtových kapitol, do nichž se člení výdaje státního rozpočtu a tedy výdaje které spadají do působnosti jednoho z ústředních orgánů státní správy. Z jedné rozpočtové kapitoly mohou být placeny zaměstnanci lišící se dle regulace zaměstnanosti. Například Ministerstvo vnitra má velké množství zaměstnanců ve sborech a ústředních orgánech státní správy, ale také nezanedbatelné množství v organizačních složkách státu a ostatních organizačních složkách státu. Většina kapitol má zaměstnance jen v jedné kategorii - například Český statistický úřad sestává pouze z ústředních orgánů státní správy.

Pro časové řady, kde se počítá s absolutními metrikami (počty zaměstnanců, prostředky na platy), jsme **odebrali kapitoly ministerstev vnitra a zahraničních věcí**, aby byly výsledky srovnatelné v čase. Počet zaměstnanců pro kapitolu ministerstva vnitra se mezi roky 2011 a 2012  zvýšily vzhledem ke změně organizační struktury o 321% Pro kapitolu ministerstva zahraničí je to pak 157%. Ponecháním těchto kapitol v grafech časových řad by došlo ke značnému zkreslení zejména grafů  A6. Kumulovaná změna reálných výdajů na platy státních úředníků  a  A8. Celkové reálné změny platů a počtu zaměstnanců. Příloha studie obsahuje variantu Grafu 4. Počet státních úředníků 2003-2020 (v tisících), ve které jsou kapitoly ministerstev vnitra a zahraničí zahrnuty. U časových řad průměrných platů jsme ministerstva vnitra a zahraničních věcí nechali zahrnutá, i když i u nich může dojít k mírnému zkreslení (například pokud došlo k přesunu zaměstnanců s vysokými platy). 
Podobně jako u těchto dvou ministerstev mohlo dojít k výrazným změnám v počtech zaměstnanců kvůli změnám organizačních struktur, o kterých nevíme.
Zároveň upozorňujeme, že pohyby v časových řadách mohou být způsobené i přesuny agend a útvarů mezi úřady, které v analýze nemůžeme zohlednit. Podobné změny nejsou konzistentně a dohledatelně dokumentovány.

:::::

### Další zdroje dat

Dodatečná data používáme **Českého statistického úřadu** o mzdách v ekonomice a inflaci: 

- při porovnávání platů používáme průměrnou pražskou mzdu pro ústřední orgány a průměrnou celorepublikovou mzdu pro ostatní, vše z datové sady ČSÚ [Průměrná hrubá měsíční mzda a medián mezd v krajích](https://www.czso.cz/csu/czso/prumerna-hruba-mesicni-mzda-a-median-mezd-v-krajich) (kód 11080) pro roky 2011-2020, dřívejší roky z dalších srovnatelných tabulek z produkce ČSÚ. Pro srovnatelnost s rozpočtovými daty používáme průměr (nikoli medián) mezd. 
- pro údaje o cenových hladinách a inflaci (například pro výpočet reálného průměrného hrubé měsíčního platu) používáme [datovou sadu ČSÚ s indexy spotřebitelských cen](https://www.czso.cz/csu/czso/indexy-spotrebitelskych-cen) (kód 010022, roky 2003-2020).

Nejlepší data o státních zaměstnancích od Ministerstva financí využíváme v této studii, ale pro celou množinu **zaměstnanců veřejného sektoru** poskytují jediné systematické údaje **Statistické ročenky** Českého statistického úřadu pro jednotlivé roky. Pro tyto účely je veřejný sektor velmi široce definován a zahrnuje, kromě státních zaměstnanců, například obce a kraje nebo i veřejné finanční i nefinanční firmy. Poslední dostupný údaj je z [ročenky za rok 2020](https://www.czso.cz/csu/czso/10-trh-prace-o73cun42om) s předběžnými informacemi pro rok 2018 (konkrétně tabulka 10-3 k trhu práce). Podle tohoto zdroje veřejný sektor celkem v roce 2018 zaměstnával 993,3 tisíc zaměstnanců (přepočtených na plné úvazky). Pro další roky (1995, 1999-2018; ostatní roky nejsou podle všeho dostupné online) shrnujeme tyto informace v grafu A0 v příloze. Mezi lety 1995 (1646 tisíc) a 2012 (921,4 tisíc) došlo k výraznému poklesu počtu zaměstnanců veřejného sektoru a mezi roky 2012 a 2018 došlo k postupnému, mírnému nárůstu. Jediné další informace ve Statické ročence jsou, že, například pro rok 2018, z celkového počtu 993,3 tisíc zaměstnanců veřejného sektoru jich 319,6 tisíc pracovalo ve veřejných nefinančních podnicích, 1,6 tisíc ve veřejných finančních institucích a 672,1 tisíc ve vládních institucích (z toho 290.5 tisíc ústřední, 375.7 neústřední a 6.0 fondy sociálního zabezpečení) a jejich průměrné hrubé měsíční mzdy ve stejném členění. Toto jsou relativně málo detailní informace, které neumožňují analýzu na úrovni jednotlivých organizací veřejného sektoru. Zaměřujeme se tedy v této studii na analýzu dat od Ministerstva financí, z kterých toho víme více o tom, kolik a kde a za jaké průměrné platy státních zaměstnanců pracuje. 
### Metoda a technika analýzy dat

Analýza je zaznamenána ve zdrojovém kódu v jazyce R [@R-base], zveřejněném včetně zdrojových dat [na platformě Github](https://github.com/dan-bart/urednici_2021). Reprodukovatelnost analytického prostředí je zajištěna systémem [`{renv}`](https://cran.r-project.org/package=renv).

### Definice a pojmy {#ap1-definice}

#### Výdaje na platy

Pracujeme pouze s výdaji na platy, nezahrnujeme tzv. ostatní platby za provedenou práci, které zahrnují např. odměny pracovníků zaměstnaných na dohody o provedení práce. Tato data sice v datové sadě jsou, není je ale možné vztáhnout k počtům těchto osob, které sledovány nejsou.

Stejně tak naše data nezahrnují odvody zaměstnavatele a další náklady na zaměstnance, takže jde opravdu o hrubé platy, nikoli o náklady práce.

Ve vztahu k platům zaměstnanců škol (příspěvkové organizace v kapitole MŠMT) také platí, že skutečné platy těchto zaměstnanců mohou být jiné, např. protože na ně z vlastních zdrojů přispívá samospráva, která zřizuje školy. Máme za to, že pokud např. některé obce doplácejí na platy svých učitelů, výsledný vyšší průměrný plat (ani dodatečné výdaje na platy) nejsou zahrnuty v datech, která využíváme, protože nejde o výdaj státního rozpočtu.

A konečně pracujeme pouze s platy zaměstnanců, kteří podléhají rozpočtové regulaci a jako takové je stát sleduje, tj. nejde o veškeré platy hrazené z prostředků státního rozpočtu (nejsou zde např. platy vysokoškolských učitelů či zaměstnanců organizací, které jsou např. příjemci dotací, prostředků na výzkum a vývoj či dodavateli veřejných zakázek.)

#### “Státní zaměstnanci” a zákon o státní službě {#ap1-statni-zamestnanci}

S pojmem “státní zaměstnanec” pracuje i zákon o státní službě, který jím označuje zaměstnance ve služebním poměru. Ve služebních úřadech ale pracují i zaměstnanci v běžném zaměstnaneckém poměru. V datech, se kterými pracujeme, nejsou zaměstnanci ve služebním poměru zvlášť sledováni. Proto v této studii jako státní zaměstnance označujeme všechny, kteří spadají do výše zmíněných kategorií regulace zaměstnanosti.

Část informací o zaměstnancích ve služebním poměru poskytuje Státní pokladna (výdaje na platy zaměstnanců ve služebním poměru podle příslušné položky druhového členění, ale bez informací o počtech a průměrných platech), další informace pak i [Výroční zpráva o státní službě](https://www.mvcr.cz/sluzba/clanek/vyrocni-zprava-vyrocni-zprava-o-statni-sluzbe.aspx) (poslední dostupná je za rok 2019).

## Příloha 2: Doplňkové výsledky

Graf A0. Počet zaměstnanců veřejného sektoru celkem (v tisících přepočtených osob) - TO BE ADDED^[Poznámky: Informace pro roky 1996-1998 a období před rokem 1995 nejsou dostupné online. Zdroj: Autoři na základě údajů Českého statistického úřadu ze Statistické ročenky pro jednotlivé roky. Pro tyto účely je veřejný sektor velmi široce definován a zahrnuje například obce a kraje nebo i veřejné finanční i nefinanční firmy.]

```{r appendix, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
A1
A2
A3
A4
A5
A6
A7
A8
A9
A10
A11
A12
A13
```

### Časové grafy obsahující kapitoly MZV a MV

```{r full graphs, echo=FALSE, out.width="100%",warning = FALSE,message = FALSE}
dt %>%
  filter(typ_rozpoctu == "SKUT", 
         kategorie_2014 %in% c("Ministerstva", "Neustredni st. sprava", 
                               "Ostatni ustredni")) %>%
  #filter(!kap_num %in% c(314, 306)) %>%
  group_by(kategorie_2014_cz, rok) %>%
  summarise(pocet_zamestnancu = sum(pocet_zamestnancu)) %>%
  group_by(rok) %>%
  mutate(pocet_zamestnancu_agg = sum(pocet_zamestnancu)) %>%
  plot_ly(
    x = ~rok, y = ~ pocet_zamestnancu / 1000, 
    color = ~kategorie_2014_cz, colors = color_map,
    hovertemplate = ~ paste(
      "<extra></extra>", "Rok:", rok, "<br>", "Kategorie:", kategorie_2014_cz, "<br>",
      "Zam\u011Bstnanc\u016F:", format(pocet_zamestnancu, big.mark = " "), "<br>",
      "Celkem za rok: ", format(pocet_zamestnancu_agg, big.mark = " ")
    ),
    hoverinfo = "text"
  ) %>%
  add_bars() %>%
  layout(
    title = list(text = "Graf B4. Počet státních úředníků 2003-2020 (v tisících)", y = 0.98),
    annotations = list(text = str_wrap("Zahrnuty kapitoly MZV a MV.",40),
                       align='left',
                       xref='paper',
                       yref='paper',
                       x=1.30,
                       y=0,
                       font = list(size = 8),
                       bordercolor='white',
                       borderwidth=1,
                       showarrow = FALSE),
    xaxis = list(title = ""),
    yaxis = list(title = ""),
    barmode = "stack", legend = list(x = 100, y = 0.5)
  ) %>%
  config(modeBarButtonsToRemove = c("zoomIn2d", "zoomOut2d", "pan2d", "lasso2d",
                                    "select2d", "autoScale2d"), 
         displaylogo = FALSE)
```

